<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="theme-color" content="#191E29">
    <meta name="viewport"  content="width=device-width, initial-scale=1.0">


  <meta name="description" content="Contrate ilustradores e designers freelancers para criar artes personalizadas. Descubra talentos, veja portfólios e transforme suas ideias em projetos incríveis no Traço Perfeito.">
  <meta name="keywords" content="contratar designer online, contratar ilustrador online, arte personalizada, designers freelancers, portfólio de arte, site para artistas, contratar designer gráfico, ilustração digital, traço perfeito, projeto design, procurar designers">



    <title>Traço Perfeito - Encontre Ilustradores e Designers Freelancers</title>
    <link rel="shortcut icon" href="imagens/favicon.ico" type="image/x-icon">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/barrapesquisa.css">
    <link rel="stylesheet" href="css/banner.css">
    <link rel="stylesheet" href="css/blocos.css">
    <link rel="stylesheet" href="css/menu.css">
    <link rel="stylesheet" href="css/filtro-index.css">
    <link rel="stylesheet" href="css/share-button.css">
   
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-notify@0.5.5/dist/simple-notify.min.css" />
   <script src="https://cdn.jsdelivr.net/npm/simple-notify@0.5.5/dist/simple-notify.min.js"></script>
   <script src="js/simple-notify.js"></script>
   <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@yaireo/tagify/dist/tagify.css">
   <script src="https://cdn.jsdelivr.net/npm/@yaireo/tagify"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="js/banner.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100..700;1,100..700&family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"> 

</head>
 
 
 
<!-------------------------------BODY------------------------------------------------>
<body onload="iniciarCarrossel()">
 <% if (typeof logado !== 'undefined' && logado != null) { %>
    <% if (logado == 2) { %>
        <script>
            notify("Login efetuado com sucesso", 
              "Olá, <%= nome_usuario%>!","success");
              // antes tava autenticado.autenticado, mas parou de funcionar do nada ai troquei
        </script>
    <% } %>
<% } %>

 
 <%  if (dadosNotificacao) { %>
        <script>
                notify("<%= dadosNotificacao.titulo%>","<%= dadosNotificacao.mensagem%>", "<%= dadosNotificacao.tipo%>", "top right");
                                   
        </script>
    <% } %>


<% if (status_usuario === 'pendente') { %>
    <%- include('../partials/aviso-pendente') %>
    
<% } %>
  


   <% if (tipo_usuario === 'profissional') { %>
  <%- include('../partials/menu-logado', { tipo_usuario: tipo_usuario }) %>
<% } else if (tipo_usuario === 'comum') { %>
  <%- include('../partials/menu-c-c', { tipo_usuario: tipo_usuario }) %>
<% } else { %>
  <%- include('../partials/menu', { tipo_usuario: tipo_usuario }) %>
<% } %>



    <!----------------------------------BANNER--------------------------------------------------------->
  <% if (!tipo_usuario) { %>

    
 
   <section class="banner">
      
 
            <section class="branco">
                <ul class="slider">
                    <li>
                        <input type="radio" id="slide1" name="slider" checked>
                        <label for="slide1" ></label>
                        <picture onclick="location.href='/cadastro'">
                            <source media="(min-width:1100px)" srcset="imagens/banner-1-desktop.png" class="img-banner">
                            <source media="(min-width:850px)" srcset="imagens/banner-1-grande.png" class="img-banner">
                            <source media="(min-width:600px)" srcset="imagens/banner-1-medio.png" class="img-banner">
                            <img src="imagens/banner-1-mobile.png"  >
                          </picture> 
                        
               
                    </li>
                    <li>
                        <input type="radio" id="slide2" name="slider" >
                        <label for="slide2" ></label>
                        <picture onclick="location.href='/cadastro'">
                            <source media="(min-width:1100px)" srcset="imagens/banner-2-desktop.png" class="img-banner">
                            <source media="(min-width:850px)" srcset="imagens/banner-2-grande.png" class="img-banner">
                            <source media="(min-width:600px)" srcset="imagens/banner-2-medio.png" class="img-banner">
                            <img src="imagens/banner-2-mobile.png"  >
                          </picture> 
               
                    </li>

                   
                 
                 
       
                </ul>

                 <!-- <section class="button-holder">
                   <button class="call-to-action" onclick="location.href='/cadastro'"> Criar conta</button>
                </section>
     -->
    </section>
 
  
<% } %>

   
 
                <main>
 
 
                    <!---------------------BARRA DE PESQUISA---------------->
                     
                     <section class="pesquisas">
                       <section class="barra-ordenar">
                         <form action="/pesquisar" id="form-pesquisa" method="get">
                           <section class="search">
                               <section class="icon" id="btn-pesquisa">
                               <button type="submit"><ion-icon name="search-outline"></ion-icon></button>
                               </section>
                               <input
                               name="q"
                                 class="search-input"
                                 type="search"
                                 id="input-pesquisa"
                                 placeholder="O que você está procurando hoje?"
                                 value="<%= termoPesquisa %>"
                               >
                             </section>
                         </form>
                          <%- include('../partials/ordenar-publis') %>
                       </section>

                      


   


 
                    
<!--                         
                        <button class="filtragem"><img src="imagens/filter.svg" alt="filter icon" onclick="Aparecer()">
                            <a class="filtro" href="#">Data de Publicação</a>
                            <ul class="lista">
                                <li><a href="#">Mais Recente</a></li>
                                <li><a href="#">Há um mês</a></li>
                                <li><a href="#">Há um ano</a></li>
                            </ul>
                            <a class="filtro" href="#">Tipo</a>
                            <ul class="lista">
                                <li><a href="#">Ilustração</a></li>
                                <li><a href="#">Edição de Vídeo</a></li>
                                <li><a href="#">Design Gráfico</a></li>
                            </ul>
                            <a class="filtro" href="#">Sobre o Artista</a>
                            <ul class="lista">
                                <li><a href="#">Formação em Design Gráfico</a></li>
                                <li><a href="#">Formação em ...</a></li>
                                <li><a href="#">Formação em ...</a></li>
                            </ul>
                            <a class="filtro" href="#">Traços</a>
                            <ul>
                                <li><a href="#">Linha Cheia</a></li>
                                <li><a href="#">Linha tracejada</a></li>
                                <li><a href="#">Linha traço-ponto</a></li>
                            </ul>
                            </button> -->

                             <%- include('../partials/filtro-index'); %>
                        
                    </section>



                    

   
 
                    <!--------------------------------------CAIXAS--------------------------------------------------------->
                    <section class="content-wrapper">
                      
                      <section class="resultado-pesquisa">
                        <% if (mostrarTextoBusca && termoPesquisa) { %>
                          <% if (publicacoes.length > 0) { %>
                            <h1 class="titulo-termo"><%= termoPesquisa %></h1>
                            <p class="descricao-termo">
                              <% if (descricaoFamosa) { %>
                                <%= descricaoFamosa %>
                              <% } else { %>
                                <% if (publicacoes.length > 5) { %>
                                  Encontre as melhores publicações de "<%= termoPesquisa %>" no Traço Perfeito.
                                <% } else { %>
                                  Encontramos alguns resultados para sua pesquisa por "<%= termoPesquisa %>".
                                <% } %>
                              <% } %>
                            </p>
                          <% } else { %>
                            <h1 class="titulo-termo">Nenhum resultado encontrado</h1>
                            <p class="descricao-termo">
                              Não encontramos publicações relacionadas a "<%= termoPesquisa %>". 
                              Tente outro termo ou verifique a ortografia.
                            </p>
                          <% } %>
                      
                        <% } else if (mostrarTextoBusca && typeof filtroNoExplorar !== "undefined") { %>
                          <% if (publicacoes.length > 0) { %>
                            <h1 class="titulo-termo"><%= filtroNoExplorar %></h1>
                            <p class="descricao-termo">
                              <% if (descricaoFiltro) { %>
                                <%= descricaoFiltro %>
                              <% } else { %>
                                <% if (publicacoes.length > 5) { %>
                                  Encontre as melhores publicações de "<%= filtroNoExplorar %>" no Traço Perfeito.
                                <% } else { %>
                                  Encontramos alguns resultados para sua pesquisa por "<%= filtroNoExplorar %>".
                                <% } %>
                              <% } %>
                            </p>
                          <% } else { %>
                            <h1 class="titulo-termo">Nenhum resultado encontrado</h1>
                            <p class="descricao-termo">
                              Não encontramos publicações relacionadas a "<%= filtroNoExplorar %>". 
                              Tente outro filtro ou verifique a ortografia.
                            </p>
                          <% } %>
                        <% } %>
                      </section>
                      <section class="container-pag-explorar">
                        <% if (publicacoes.length === 0) { %>
                        <section class="sem-publicacoes">
                          <p>Não há publicações no momento.</p>
                        </section>
                      <% } else { %>
                       <% publicacoes.forEach(pub => { %>
                        <section class="item-explorar item-1" 
                        data-tags="<%= pub.TAGS %>" 
                          data-categoria="<%= pub.CATEGORIA %>"
                          data-curtida ="<%= pub.N_CURTIDAS %>"
                          data-comentarios ="<%= pub.N_COMENTARIOS %>"
                          data-visualizacoes ="<%= pub.N_VISUALIZACOES %>"
                          data-data_publicacao ="<%= pub.DATA_PUBLICACAO %>"
                          >
                      
                          <a href="/publicacao/<%= pub.ID_PUBLICACAO %>">
                         
                          <!-- <section class="carrossel-imagens-explorar" onmouseenter="mostrarControles(this)" onmouseleave="esconderControles(this)">
                        <section class="container-imgs" ontouchstart="startSwipe(event, this)" ontouchmove="swipeMove(event)" ontouchend="endSwipe(event, this)">
                          <% pub.imagens.forEach((img, idx) => { %>
                            <img 
                              src="data:image/jpeg;base64,<%= img.toString('base64') %>" 
                              class="publicacao-img<%= idx === 0 ? ' ativa' : '' %>" 
                              alt="Imagem da publicação"/>
                          <% }) %>
                        </section>
                      
                        <% if (pub.imagens.length > 1) { %>
                          <button class="seta-carrossel esquerda" onclick="event.preventDefault();prevImg(this)"><ion-icon name="chevron-back-outline"></ion-icon></button>
                          <button class="seta-carrossel direita" onclick="event.preventDefault();nextImg(this)"><ion-icon name="chevron-forward-outline"></ion-icon></button>
                      
                          <section class="indicadores">
                            <% pub.imagens.forEach((_, idx) => { %>
                              <span class="indicador<%= idx === 0 ? ' ativo' : '' %>"></span>
                            <% }) %>
                          </section>
                        <% }  %>
                      </section> -->
                      
                      
                      <section class="carrossel-imagens-explorar" 
                        onmouseenter="mostrarControles(this)" 
                        onmouseleave="esconderControles(this)">
                        
                        <section class="container-imgs" 
                          ontouchstart="startSwipe(event, this)" 
                          ontouchmove="swipeMove(event)" 
                          ontouchend="endSwipe(event, this)">
                      
                          <% if (pub.imagens && pub.imagens.length > 0) { %>
                            <% pub.imagens.forEach((img, idx) => { %>
                              <img 
                                src="data:image/jpeg;base64,<%= img.toString('base64') %>" 
                                class="publicacao-img<%= idx === 0 ? ' ativa' : '' %>" 
                                alt="Imagem da publicação"
                                onerror="this.src='/imagens/fallback.png';"
                              />
                            <% }) %>
                          <% } else { %>
                          
                            <img 
                              src="/imagens/img-quebrada.png" 
                              class="publicacao-img ativa" 
                              alt="Imagem padrão"
                            />
                          <% } %>
                        </section>
                      
                        <% if (pub.imagens && pub.imagens.length > 1) { %>
                          <button class="seta-carrossel esquerda" onclick="event.preventDefault();prevImg(this)">
                            <ion-icon name="chevron-back-outline"></ion-icon>
                          </button>
                          <button class="seta-carrossel direita" onclick="event.preventDefault();nextImg(this)">
                            <ion-icon name="chevron-forward-outline"></ion-icon>
                          </button>
                      
                          <section class="indicadores">
                            <% pub.imagens.forEach((_, idx) => { %>
                              <span class="indicador<%= idx === 0 ? ' ativo' : '' %>"></span>
                            <% }) %>
                          </section>
                        <% } %>
                      </section>
                      
                      
                        </a>
                      
                          <section class="menu-opcoes"> <!-- Denunciar e compartilhar -->
                      
                            <svg class="icone-menu" xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#fff"><path d="M480-160q-33 0-56.5-23.5T400-240q0-33 23.5-56.5T480-320q33 0 56.5 23.5T560-240q0 33-23.5 56.5T480-160Zm0-240q-33 0-56.5-23.5T400-480q0-33 23.5-56.5T480-560q33 0 56.5 23.5T560-480q0 33-23.5 56.5T480-400Zm0-240q-33 0-56.5-23.5T400-720q0-33 23.5-56.5T480-800q33 0 56.5 23.5T560-720q0 33-23.5 56.5T480-640Z"/></svg>
                      
                            <section class="opcoes-menu">
                      
                              <% if (autenticado && id_usuario === pub.ID_USUARIO) { %>
                                <button 
                                  class="btn-editar" 
                                  title="Editar publicação" 
                                  data-id="<%= pub.ID_PUBLICACAO %>"
                                  data-titulo="<%= pub.NOME_PUBLICACAO %>"
                                  data-categoria="<%= pub.CATEGORIA %>"
                                  data-descricao="<%= pub.DESCRICAO_PUBLICACAO %>"
                                  data-tags="<%= pub.TAGS %>"
                                  data-imagens='<%- JSON.stringify(pub.imagensUrls || []) %>'>
                                  <ion-icon name="create-outline"></ion-icon>
                                  Editar
                                </button>
                             

                                
                                  <button class="btn-excluir-publicacao" data-id="<%= pub.ID_PUBLICACAO %>" title="Excluir publicação">
                            <ion-icon name="trash-outline"></ion-icon>Excluir
                          </button>
                              <% } %>
                      
                              <button class="btn-compartilhar" title="Compartilhar" id="openShareModal" onclick="openModal('<%= pub.ID_PUBLICACAO %>')">
                                <ion-icon name="share-social-outline"></ion-icon>
                                Compartilhar
                              </button>
                               <% if (!autenticado || id_usuario !== pub.ID_USUARIO) { %>
                        <button class="btn-denunciar" data-id="<%= pub.ID_PUBLICACAO %>">
                          <ion-icon name="flag-outline"></ion-icon> Denunciar
                        </button>
                      <% } %>
                            </section>
                          </section>
                      
                          <section class="nome-e-btn-like">
                      
                            <section class="foto-nome-dono-publi">
                              <!-- User profile photo -->
                              <img 
                         src="<%= pub.FOTO_PERFIL_BANCO_USUARIO || '/imagens/img.png' %>" 
                          class="foto-perfil-explorar"  
                        alt="Foto do usuário"
                        onerror="this.onerror=null; this.src='/imagens/img.png'">
                      
                             <p class="nome-dono-post-ex">
                        <a href="<%= (autenticado && id_usuario === pub.ID_USUARIO) ? '/meu-perfil-artista' : '/perfil/' + pub.ID_USUARIO %>" class="nome-usuario">
                      
                          <%= pub.NOME_USUARIO %>
                        </a>
                      </p>
                      
                      
                      
                      
                        </section>
                      
                        <section class="contagem">
                      
                          <ion-icon name="eye"></ion-icon>
                          <small><%= pub.N_VISUALIZACOES %></small>
                        </section>
                      
                      
                         
                             <section class="contagem">
                             
                      
                      
                               <button class="like-button">
                        <a href="/favoritar?id=<%= pub.ID_PUBLICACAO %>&sit=<%= pub.FAVORITO %>&idDono=<%= pub.ID_USUARIO %>&nomePub=<%= encodeURIComponent(pub.NOME_PUBLICACAO) %>"  
                           onclick="localStorage.setItem('scrollPos', window.scrollY)">
                          <i class="<%= pub.FAVORITO === 'favorito' ? 'fas' : 'far' %> fa-heart <%= pub.FAVORITO %>"></i>
                        </a>
                      </button>
                      
                      
                                 <small><%= pub.N_CURTIDAS %></small>
                             </section>
                          </section>
                      
                      
                          <!-- Description -->
                          <p class="descricao-item-explorar"><%= pub.DESCRICAO_PUBLICACAO %></p>
                      
                        </section>
                                                  <!-- Modal de denúncia -->
                          <section id="modalDenuncia" class="modal">
                              <section class="modal-content">
                              <h3>Qual o motivo da denúncia?</h3>
                              <form id="formDenuncia" action="/denunciar-publicacao" method="post">
                                <input type="hidden" id="idPublicacaoInput" name="idPublicacao" value="<%= pub.ID_PUBLICACAO %>">
                                  <label><input type="radio" name="motivo" value="Conteúdo ofensivo"> Conteúdo ofensivo</label><br>
                                  <label><input type="radio" name="motivo" value="Spam"> Spam</label><br>
                                  <label><input type="radio" name="motivo" value="Informação falsa ou enganosa"> Informação falsa ou enganosa</label><br>
                                  <label><input type="radio" name="motivo" value="Nudez ou conteúdo sexual"> Nudez ou conteúdo sexual</label><br>
                                  <label><input type="radio" name="motivo" value="Plágio ou cópia não autorizada"> Plágio ou cópia não autorizada</label><br>
                                  <label><input type="radio" name="motivo" value="Outro"> Outro</label><br><br>
                      
                                  <button type="submit">Enviar denúncia</button>
                                  <button type="button" id="fecharModal">Cancelar</button>
                              </form>
                              </section>
                          </section>
                      
                      
                      
                                      <!-- Modal de compartilhamento -->
                                      <section id="modal-share">
                                      <section class="modal-content-share">
                      <h2>Compartilhar link da publicação</h2>
                      <section class="link-container">
                      <section id="shareLink">
                        tracoperfeito.onrender.com/publicacao/<%= pub.ID_PUBLICACAO %>
                      </section>
                      <button class="copy-button" onclick="copyToClipboard()">
                          <section id="copyIcon">
                      
                              <svg xmlns="http://www.w3.org/2000/svg" style="width: 16px; height: 16px; margin-right: 4px;" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2M16 8h2a2 2 0 012 2v8a2 2 0 01-2 2h-8a2 2 0 01-2-2v-2"/>
                              </svg>
                          </section>
                          <section id="copyText">Copiar link</section>
                          <section id="tooltip">Copiado!</section>
                      </button>
                      </section>
                      <button class="close-modal-btn" onclick="closeModal()">×</button>
                                      </section>
                                      </section>
                      
                      <% }) } %>
                      
                          </section>
                      
                      
                                 
                          <%- include('../partials/excluir-publi') %>
                      
                      
                      
                                     
                                      </main>
                      
                                      
                      
                      
                         <% if (tipo_usuario === 'profissional') { %>
                      
                                       <%- include('../partials/fab-button') %>
                      <% }   else if(tipo_usuario === 'comum') {   %>
                              <%- include('../partials/fab-button-comum') %>
                        <% } %>
                        
                      
                                     
                      
                          <%- include('../partials/rodape'); %>
                    </section>

<script>
  window.addEventListener('scroll', function () {
    const barra = document.querySelector('.pesquisas');
    if (window.scrollY > 10) {
      barra.classList.add('sombra');
    } else {
      barra.classList.remove('sombra');
    }
  });
</script>

<script>

  

// autoplay aautomático do carrossel
document.addEventListener('DOMContentLoaded', () => {
  const carrosseis = document.querySelectorAll('.carrossel-imagens-explorar');

  carrosseis.forEach(carrossel => {
    let idx = 0;
    const total = carrossel.querySelectorAll('.publicacao-img').length;

    if (total > 1 && window.innerWidth > 500) {
      setInterval(() => {
        idx = (parseInt(carrossel.dataset.idx || '0') + 1) % total;
        updateCarrossel(carrossel, idx);
      }, 10000);
    }

    updateCarrossel(carrossel, 0);
  });
});
</script>

<script src="/js/publicacoesindex.js"></script>

<!-- 
<script src="js/like.js"></script> -->
<script src="js/mobile-navbar.js"></script>
<script src="js/denuncia-compartilhamento.js"></script>
<script src="js/rolagem-atualizar-pag.js"></script>

<script>

  document.addEventListener('DOMContentLoaded', () => {
  const nomesdeusuario = document.querySelectorAll('.nome-usuario');
  const ignorar = ['de', 'da', 'do', 'das', 'dos'];

  nomesdeusuario.forEach(nome => {
    const partesOriginais = nome.innerText.trim().split(' ');
    const partesSemLigacao = partesOriginais.filter(p => !ignorar.includes(p.toLowerCase()));

    if (partesSemLigacao.length > 3) {
      const capitalize = str => str[0].toUpperCase() + str.slice(1).toLowerCase();
      nome.innerText = `${capitalize(partesSemLigacao[0])} ${capitalize(partesSemLigacao[partesSemLigacao.length - 1])}`;
    } else {
      nome.innerText = partesOriginais.join(' ');
    }
  });
});

</script>

<%- include('../partials/editar-publicacao') %>

</body>
</html>