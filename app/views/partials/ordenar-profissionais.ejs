<section class="filtro-ordenacao">
  <button id="btnOrdenar" class="btn-ordenar">
    <ion-icon name="filter-outline"></ion-icon>
    <span id="textoOrdenar">Mais Recentes</span>
    <span id="iconeSeta"><ion-icon name="chevron-up"></ion-icon></span>
  </button>
  <section id="opcoesOrdenacao" class="opcoes-ordenacao oculto">
    <section data-ordem="mais-seguidores">Mais Seguidores <span class="check"><ion-icon name="checkmark-outline"></ion-icon></span></section>
    <section data-ordem="mais-contratados">Mais Contratados <span class="check"><ion-icon name="checkmark-outline"></ion-icon></span></section>
    <section data-ordem="melhor-avaliacao">Melhor Avaliação <span class="check"><ion-icon name="checkmark-outline"></ion-icon></span></section>
    <section data-ordem="mais-recentes" class="selecionada">Mais Recentes <span class="check"><ion-icon name="checkmark-outline"></ion-icon></span></section>
    <section data-ordem="mais-antigos">Mais Antigos <span class="check"><ion-icon name="checkmark-outline"></ion-icon></span></section>
  </section>
</section>


<script>
document.addEventListener("DOMContentLoaded", () => {
  const btnOrdenar = document.getElementById("btnOrdenar");
  const textoOrdenar = document.getElementById("textoOrdenar");
  const iconeSeta = document.getElementById("iconeSeta");
  const opcoesOrdenacao = document.getElementById("opcoesOrdenacao");
  const opcoes = opcoesOrdenacao.querySelectorAll("section");

  // Atualiza seleção do texto e classe
  const atualizarSelecao = (selecionada) => {
    opcoes.forEach(o => o.classList.remove("selecionada"));
    selecionada.classList.add("selecionada");
    textoOrdenar.textContent = selecionada.textContent.replace("✔", "").trim();
  };

  btnOrdenar.addEventListener("click", () => {
    const aberto = !opcoesOrdenacao.classList.toggle("oculto");
    iconeSeta.style.transform = aberto ? "rotate(180deg)" : "rotate(0deg)";
  });

  opcoes.forEach(opcao => {
    opcao.addEventListener("click", () => {
      atualizarSelecao(opcao);
      ordenarProfissionais(opcao.dataset.ordem);
      opcoesOrdenacao.classList.add("oculto");
      iconeSeta.style.transform = "rotate(0deg)";
    });
  });

  // Inicializa texto do botão
  const inicial = opcoesOrdenacao.querySelector(".selecionada");
  if (inicial) {
    textoOrdenar.textContent = inicial.textContent.replace("✔", "").trim();
  }
});
</script>
